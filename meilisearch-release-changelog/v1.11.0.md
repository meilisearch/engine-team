# v1.11.0 release changelogs

<!-- The following line should ONLY be put PRE-release changelogs -->
> [!WARNING]
> Since this is a release candidate (RC), we do NOT recommend using it in a production environment. Is something not working as expected? We welcome [bug reports](https://github.com/meilisearch/meilisearch/issues/new/choose) and [feedback about new features](https://github.com/meilisearch/product/discussions).

Meilisearch v1.11 introduces several changes about hybrid search: usage improvements to prepare a future stabilization of the feature, but also a huge impact on the performance thanks to the binary quantization. Finally, according to your feedback, we improved the federated search usage.

<!-- The following lines should NOT be put in the PRE-release changelogs -->
üß∞ All official Meilisearch integrations (including SDKs, clients, and other tools) are compatible with this Meilisearch release. Integration deployment happens between 4 to 48 hours after sa new version becomes available.

<!-- The following lines should NOT be put in the PRE-release changelogs -->
Some SDKs might not include all new features. Consult the project repository for detailed information. Is a feature you need missing from your chosen SDK? Create an issue letting us know you need it, or, for open-source karma points, open a PR implementing it (we'll love you for that ‚ù§Ô∏è).

# New features and updates üî•

## Experimental - Hybrid search improvements

For a future stabilization, multiple changes have been applied to hybrid search features.

üìñ More details about the usage in this [page](https://www.notion.so/meilisearch/v1-11-AI-search-changes-0e37727193884a70999f254fa953ce6e).

Done by @dureuill in #4906, #4920, #4892, and #4938.

### ‚ö†Ô∏è Breaking changes

* When using the semantic or the hybrid search, `hybrid.embedder` is now a **mandatory** parameter in `GET and POST /indexes/{:indexUid}/search`
* As a consequence, it is now **mandatory** to pass `hybrid` even for full-vector search (with only `vector` and not `q`)
* `embedder` is now a **mandatory** parameter in `GET and POST /indexes/{:indexUid}/similar`
* Ignore non-zero `semanticRatio` when `vector` is passed but not `q`: a semantic search will be performed.

### Addition & improvements

* The default model for OpenAI is now `text-embedding-3-small` instead of `text-embedding-ada-002`.
* Limit the maximum length of a rendered document template: when the source of an embedder is set to `huggingFace`, `openAi`, `rest` or `ollama`, then `documentTemplateMaxBytes` is now available as an optional parameter. This parameter describes the number of bytes in which the rendered document template text should fit when trying to embed a document. Longer texts are truncated to fit.
* Add the ability to query whether a field is searchable in `documentTemplate`: use `field.is_searchable`:  `true` if the field is a searchable attribute, otherwise `false`.
* The new document template changed to
  * filter out fields that are not searchable
  * filter out fields that are nil or missing for the current document

v1.10 and before:
```
{% for field in fields %}
{{ field.name }}: {{ field.value }}\n
{% endfor %}
```

From v1.11:
```
{% for field in fields %}
{% if field.is_searchable and not field.value == nil %}
{{ field.name }}: {{ field.value }}\n
{% endif %}
{% endfor %}
```

This last change is backward compatible. Embedders that use the v1.10 document template will keep using it. The new default document template will only be applied to newly added embedders.

## Speed up indexing of your vector database with binary quantization

The binary quantization converts your embeddings of floating point numbers (using 32 bits) into embeddings of boolean values (using 1 bit).
In our benchmarks, it reduced the size of the database by a factor of 10, and divided the indexing time by a factor of 6 without much impact on the search time.

> [!WARNING]
> Enabling this feature will update all of your vectors to contain only `1`s or `-1`s, impacting the relevancy significantly.
> Once enabled, **there is no coming back**. Before trying it out on your main index, you should try the feature on a smaller index to ensure it fits your use case.

Although this feature degrades the relevancy of the semantic searches, it showed great results on collections with many dimensions (> 1300) and many points (more than 100000).

Enable the binary quantization by updating the settings of your embedder with:
```bash
curl \
  -X PATCH 'http://localhost:7700/indexes/movies/settings' \
  -H 'Content-Type: application/json' \
  --data-binary '{
    "embedders": {
      "image2text": {
        "binaryQuantized": true
      }
    }
  }'
```

Done by @irevoire in #4941.

## Federated search improvements

### Request by-index facet distribution and stats

Request facet distributions and facet stats in your federated search, by using `federation.facetsByIndex` in the POST `POST /multi-search` route.

By default the distribution and stats are returned for each index that participates in the federated search.

```json5
POST /multi-search
{
  "federation": {
    "limit": 20,
    "offset": 0,
	"facetsByIndex": {
	  "movies": ["title", "id"],
	  "comics": ["title"],
	}
  },
  "queries": [
    {
      "q": "Batman",
      "indexUid": "movies"
    },
    {
      "q": "Batman",
      "indexUid": "comics"
    }
  ]
}
```

### Request merged facet distribution and stats

Merge the returned facets in a single facet distribution and stats that is global to the entire request, by using `federation.mergeFacets` in the POST `POST /multi-search` route.

The number of returned values can be limited for all facets with `federation.mergeFacets.maxValuesPerFacet`.

```json5
POST /multi-search
{

  "federation": {
    "limit": 20,
    "offset": 0,
	  "facetsByIndex": {
	    "movies": ["title", "id"],
	    "comics": ["title"],
	  },
	  "mergeFacets": {
	    "maxValuesPerFacet": 10,
	  }
  }
  "queries": [
    {
      "q": "Batman",
      "indexUid": "movies"
    },
    {
      "q": "Batman",
      "indexUid": "comics"
    }
  ]
}
```

Done by @dureuill in #4929.

## Experimental - `STARTS_WITH` operator during search

Enable the experimental feature to use the `STARTS_WITH` filter operator:

```bash
curl \
  -X PATCH 'http://localhost:7700/experimental-features/' \
  -H 'Content-Type: application/json' \
  --data-binary '{
    "containsFilter": true
  }'
```

Use the `STARTS_WITH` operator when filtering:

```json5
curl \
  -X POST http://localhost:7700/indexes/movies/search \
  -H 'Content-Type: application/json' \
  --data-binary '{
    "filter": "hero STARTS_WITH spider"
  }'
```

üó£Ô∏è This is an experimental feature, and we need your help to improve it! Share your thoughts and feedback on this [GitHub discussion](https://github.com/orgs/meilisearch/discussions/763).

Done by @Kerollmops in #4939.

## Other improvements

* Language support and [localizedAttributes settings](https://www.meilisearch.com/docs/reference/api/settings#localized-attributes) by @ManyTheFish in #4937
  * Add iso-639-1 variants
  * Convert iso-639-1 into iso-639-3

# Fixes üêû

* ‚ö†Ô∏è When using federated search, `query.facets` was silently ignored at the query level, but should not have been. It now returns the appropriate error. Use `federation.facetsByIndex` instead if you want facets to be applied during federated search.
* In prometheus metrics return the route pattern instead of the real route when returning the HTTP requests total by @irevoire in #4839
* Always truncate values at the end of the list of facet values when the number of facet values is larger than the index setting `faceting.maxValuesPerFacet`. For example, for the facet values ordered alphabetically `["blue", "red", "yellow"]`, setting `faceting.maxValuesPerFacet` sometimes resulted in `["blue", "yellow"]` instead of ["blue", "red"]`. By @dureuill in #4929
* Fix Swedish support: the characters `√•`/`√§`/`√∂` are not normalized like the `a`/`o` characters anymore. By @ManyTheFish in #4945

# Misc

* Dependencies updates
  * Security dependency upgrade: bump quinn-proto from 0.11.3 to 0.11.8 by @dependabot in #4911
* CIs and tests
  * Make the tests run faster by @irevoire in #4808
* Documentation
  * Fix broken links in README by @iornstein in #4943
* Misc
  * Allow Meilitool to dumplessly, offline upgrade v1.9 -> v1.10 in some conditions by @dureuill in #4912

‚ù§Ô∏è Thanks again to our external contributors:
- [Meilisearch](https://github.com/meilisearch/meilisearchg): @iornstein.
- [Charabia](https://github.com/meilisearch/charabia): TBD
