# v1.3.0 release changelogs

<!-- The following line should NOT be put in the official release changelogs -->


Meilisearch v1.3 introduces Meilisearch as a vector store, visible ranking score details and defining a field to search on at search time.  It also now includes the ability to search within facet values and facet values that are sortable.

<!-- The following lines should ONLY be put in the official release changelogs -->
üß∞ All official Meilisearch integrations (including SDKs, clients, and other tools) are compatible with this Meilisearch release. Integration deployment happens between 4 to 48 hours after a new version becomes available.

Some SDKs might not include all new features‚Äîconsult the project repository for detailed information. Is a feature you need missing from your chosen SDK? Create an issue letting us know you need it, or, for open-source karma points, open a PR implementing it (we'll love you for that ‚ù§Ô∏è).

# New features and improvements üî•

## Vector Store
The release of v1.3 enables Meilisearch to serve as a vector store. This means Meilisearch now accepts vectors in documents, stores them, and lets users retrieve the nearest documents using the search endpoint.

### Sending Vectorized Documents

For the first iteration of this feature you must compute the vectors on your side before sending to Meilisearch. Vectors should be sent with the document itself using the `_vectors` field.  TBD (is there a doc here for how to do this?) Multiple vectors can be sent for a single document.

‚ö†Ô∏è Note the size of the vectors must be the same across all of your documents. If the sizes are inconsistent you will see an error in your tasks.

```bash
curl -X POST -H 'content-type: application/json' \
'localhost:7700/indexes/myvectors/documents' \
--data-binary '[
    { "id": 0, "_vectors": [0, 0.8, -0.2], "text": "Hello World" },
    { "id": 1, "_vectors": [1, -0.2, 0], "text": "Hello Doggy" },
    { "id": 2, "_vectors": [[0.5, 3, 1], [-0.2, 4, 6]], "text": "Hello People" }
]'
```

### Query Meilisearch using Vectors

You can query the nearest documents using the default `/search` route by sending the vector of your query via the `vector` field. Again, for the first iteration you must compute the vector query on your side before requesting from Meilisearch.

```bash
curl -X POST -H 'content-type: application/json' \
'localhost:7700/indexes/myvectors/search' \
--data-binary '{ "vector": [0, 1, 2] }'
```

### Similarity score
As part of v1.3.0 we will return a similarlity score as part of the documents retrieved. This score will be between 0 and 1 and viewed under the `_semanticSimilarity` property. The higher the ranking score, the more similar the document.

```json
{
  "hits": [
    { "id": 0, "_vectors": [0, 0.8, -0.2], "text": "Hello World", "_semanticSimilarity": 0.6754 },
    { "id": 1, "_vectors": [1, -0.2, 0], "text": "Hello Doggy", "_semanticSimilarity": 0.7546 },
    { "id": 2, "_vectors": [[0.5, 3, 1], [-0.2, 4, 6]], "text": "Hello People", "_semanticSimilarity": 0.78 }
  ],
  "query": "",
  "vector": [0, 1, 2],
  "processingTimeMs": 0,
  "limit": 20,
  "offset": 0,
  "estimatedTotalHits": 2
}
```

TBD - should this be with the new endpoint instead??
When launching Meilisearch, use the following flag:
```bash
meilisearch --experimental-score-details
```

üó£Ô∏è Since this feature is experimental, we need your help to iterate on it! You are more than welcome to share your thoughts and your feedback on [this discussion](https://github.com/meilisearch/meilisearch/discussions/621).

‚ö†Ô∏è The experimental feature API can break between Meilisearch versions. Be careful if using it in production.

Done by @Kerollmops in #3825


## Display ranking details at search

Meilisearch v1.3.0 introduces score details per document via the `showRankingScore` search query parameter. With this in place each document will return with a `_rankingScore` property displaying a score between 0 and 1. The higher the ranking score, the more relevant the document.

```json 
"_rankingScore": 0.8575757575757575,
```

Additionally, as an experimental feature, you can view detailed scoring per ranking rule for each document via the `showRankingScoreDetails` search query parameter. With this in place each document will return with a `_rankingScoreDetails` JSON object. That object will contain a property and a score value for each ranking rule. 

```json 
"_rankingScoreDetails": {
                "words": {
                    "order": 0,
                    "matchingWords": 1,
                    "maxMatchingWords": 1,
                    "score": 1.0
                },
                "typo": {
                    "order": 1,
                    "typoCount": 0,
                    "maxTypoCount": 1,
                    "score": 1.0
                },
                "proximity": {
                    "order": 2,
                    "score": 1.0
                },
                "attribute": {
                    "order": 3,
                    "attributes_ranking_order": 0.8,
                    "attributes_query_word_order": 0.6363636363636364,
                    "score": 0.7272727272727273
                },
                "exactness": {
                    "order": 4,
                    "matchType": "noExactMatch",
                    "score": 0.3333333333333333
                }
            }
```

‚ö†Ô∏è While the `_rankingScore` is stable in v1.3.0 the `_rankingScoreDetails` are being released as an experimental feature. They are expected to be stabilized in v.1.4.0.

When launching Meilisearch, use the following flag:
```bash
meilisearch --experimental-score-details
```

üó£Ô∏è Since this feature is experimental, we need your help to iterate on it! You are more than welcome to share your thoughts and your feedback on [this discussion](https://github.com/meilisearch/meilisearch/discussions/594).

‚ö†Ô∏è The experimental feature API can break between Meilisearch versions. Be careful if using it in production.

Done by @dureuill in #3771

## Define field to search on at search time

v1.3.0 introduces a new search parameter, `attributesToSearchOn`.

`attributesToSearchOn` is a search parameter accepting an array of strings indicating one or more document attributes. Queries using `attributesToSearchOn` will restrict the search to the indicated attributes.

Given the following dataset:
```json
{
  "id": 0,
  "name": "Our Wives Under the Sea",
  "genre": ["horror", "scifi"],
  "synopsis": "A woman returns to her wife transformed after a deep-sea adventure."
},
{
  "id": 1,
  "name": "A Strange and Stubborn Endurance",
  "genre": ["adventure"],
  "synopsis": "A man must overcome trauma and fight off a mysterious assassin."
}
```
And the following query:
```json
{
  "q": "adventure",
  "attributesToSearchOn": ["genre"]
}
```
Meilisearch will only return document 1.

Both documents contain the word adventure, but `"attributesToSearchOn": ["genre"]` instructs Meilisearch to only consider results found on the genre field.

Done by @ManyTheFish in (#3834)


## Search for facet values
Meilisearch v1.3.0 introduces a new endpoint  `POST /indexes/{index}/facet-search` that allows you to search for facet values. Only fields defined as `filterableAttributes` will be facet searchable.

Done by @Kerollmops in (#3611)

## Sort facet values by count
By default, all facet values are sorted in ascending alphanumeric order. With the release of v1.3.0 you can change this using the `sortFacetValuesBy` property of the [`faceting` index settings](/reference/api/settings#faceting). This will allow you to sort facet by value count i.e. the genre with the highest number of results shows first.

Done by @Kerollmops in (#3612)

### Performance improvements

* Use `RoaringBitmap::deserialize_unchecked_from` to reduce the deserialization time (#3788) @Kerollmops 
* Remove the `docid_word_positions` database (#3819) @loiclec



## Language support improvements

* TBD charabia changes to be included

## Other improvements
* Improve the metrics (#3789) @irevoire


# Fixes üêû

  * Changes the way words are counted in the word count DB (#3824) @dureuill 
  * Fix addition deletion bug (#3670) @irevoire

# Misc


* Dependencies upgrade
  * Bump actions/setup-go from 3 to 4 (#3805) @dependabot
  * Bump Swatinem/rust-cache from 2.2.1 to 2.4.0 (#3803) @dependabot 
  * Bump svenstaro/upload-release-action from 2.5.0 to 2.6.1 (#3804) @dependabot


* CIs and tests
  * Add a cron test with disabled tokenization (with @roy9495) (#3779) @curquiza
  * Improve SDK CI to choose the Docker image (#3783) @curquiza
  * Fix SDK CI for scheduled jobs (#3813) @curquiza
  * Fix SDK CI (again) (#3844) @curquiza
  * Fix error messages in `check-release.sh` (#3799) @vvv

* Documentation
  * Move comments above keys in config.toml (#3731) @jirutka 
  * Add more documentation to graph-based ranking rule algorithms + comment cleanup (#3835) @loiclec

* Misc
  * Revert "Improve docker cache" (#3781) @curquiza 
  * Bring back changes from `release-v1.2.0` to `main` (#3811) @curquiza
  * Fix some typos (#3842) @cuishuang 

‚ù§Ô∏è Thanks again to our external contributors:
- [Meilisearch](https://github.com/meilisearch/meilisearch): @cuishuang, @jirutka, @vvv 
- [Charabia](https://github.com/meilisearch/charabia): 

