# v1.9.0 release changelogs

<!-- The following line should ONLY be put PRE-release changelogs -->
‚ö†Ô∏è Since this is a release candidate (RC), we do NOT recommend using it in a production environment. Is something not working as expected? We welcome [bug reports](https://github.com/meilisearch/meilisearch/issues/new/choose) and [feedback about new features](https://github.com/meilisearch/product/discussions).

Meilisearch v1.9 includes performance improvements for hybrid search and the addition/updating of settings. This version benefits from multiple requested features, such as the new `frequency` matching strategy and the ability to retrieve similar documents.

<!-- The following lines should NOT be put in the PRE-release changelogs -->
üß∞ All official Meilisearch integrations (including SDKs, clients, and other tools) are compatible with this Meilisearch release. Integration deployment happens between 4 to 48 hours after a new version becomes available.

<!-- The following lines should NOT be put in the PRE-release changelogs -->
Some SDKs might not include all new features. Consult the project repository for detailed information. Is a feature you need missing from your chosen SDK? Create an issue letting us know you need it, or, for open-source karma points, open a PR implementing it (we'll love you for that ‚ù§Ô∏è).

# New features and updates üî•

## Hybrid search improvements

Since we focus on AI innovation, this version introduces multiple improvements and changes related to the hybrid search.
More detailed changelog [here](https://meilisearch.notion.site/v1-9-AI-search-changes-e90d6803eca8417aa70a1ac5d0225697#38e6d3adf40e4ef1be14a3c4be39df94).

Done by @dureuill and @irevoire in #4633 and #4649

### ‚ö†Ô∏è Breaking changes of hybrid search usage

- Before v1.9, an empty array in `_vectors.embedder` used to be interpreted as a single embedding of dimension 0 when specifying embeddings in documents. In v1.9 it is now interpreted as 0 embedding. The previous behavior was surprising and not useful.
- From v1.9, by default, `_vectors` will not be returned anymore during a search. This will considerably improve performance. To display it, a new boolean search parameter has been introduced: `retrieveVectors` (default: `false`).

### Improvements

Meilisearch v1.9.0 improves performance when indexing and using hybrid search, avoiding useless operations and optimizing the important ones.

## Filter by score

TBD

Done by @dureuill in TBD

## Get similar documents

To retrieve similar documents in your datasets, two new routes have been introduced
- `POST /indexes/:indexUid/similar` using parameters in the request body.
- `GET /indexes/:indexUid/similar`, using query URL parameters.

```json5
POST /indexes/:indexUid/similar
{
  // Mandatory: the external id of the target document
  "id": "23",
  // Optional, defaults to 0: how many results to skip
  "offset": 0,
  // Optional, defaults to 20: how many results to display
  "limit": 2,
  // Optional, defaults to null: an additional filter for the returned documents
  "filter": "release_date > 1521763199",
  // Optional, defaults to the default embedder: name of the embedder to use
  // for computing recommendations.
  "embedder": "default",
  // Optional, defaults to null: same as the search query parameter of the same name
  "attributesToRetrieve": [],
  // Both optional, defaults to false: allow displaying the ranking score
  // (resp. detailed ranking score)
  "showRankingScore": false,
  "showRankingScoreDetails": false
}
```

Done by @dureuill in #4647

## `frequency` matching strategy when searching

A `frequency` variant to the `matchingStrategy` search parameter has been added. This favors the least frequent query words when retrieving the documents.

```bash
curl \
 -X POST 'http://localhost:7700/indexes/movies/search' \
 -H 'Content-Type: application/json' \
 --data-binary '{
    "q": "chaval blanc",
    "matchingStrategy": "frequency"
 }'
```

Previous existing values for `matchingStrategy` are `last` and `all` (`last` is the default value).

Done by @ManyTheFish in TBD

## Set `distinctAttribute` at search

TBD

## Improve indexing speed when updating/adding settings

Meilisearch now limits operations when importing settings by avoiding useless writing operations in its internal database and by reducing disk usage.

Done by @irevoire and @Kerollmops in #4646, #4656 and #4631

## Other improvements

* [Prometheus experimental feature](https://github.com/orgs/meilisearch/discussions/625): Use HTTP path pattern instead of full path in metrics (#4619) @gh2k
* ‚ö†Ô∏è Remove `exportPuffinReport` experimental feature. Use [logs routes](https://github.com/orgs/meilisearch/discussions/721) and [logs modes](https://github.com/orgs/meilisearch/discussions/723) instead (#4655) @Kerollmops

# Fixes üêû

* When no searchable attributes are declared, all the fields have the same importance instead of being randomly given more importance. More information [here](https://github.com/meilisearch/meilisearch/issues/4639) (#4631) @irevoire
* Fix `searchableAttributes` behavior with nested fields when they were not explicitly defined. More information [here](https://github.com/meilisearch/meilisearch/issues/4639) (#4631) @irevoire
* Fix security issue in dependency: bump Rustls to non-vulnerable versions (#4622) @Kerollmops

# Misc

* Dependencies updates
  * TBD
* CIs and tests
  * Add "precommands" to benchmark (#4624) @dureuill
  * Allow to comment with the results of benchmark invocation (#4651) @dureuill
* Documentation
  * Update README.md (#4664) @tpayet
* Misc
  * Fix some typos in comments (#4568) @yudrywet
  * Fix some typos in comments (#4582) @writegr

‚ù§Ô∏è Thanks again to our external contributors:
- [Meilisearch](https://github.com/meilisearch/meilisearch): @gh2k, @writegr, @yudrywet.
- [Charabia](https://github.com/meilisearch/charabia): TBD
