# v1.0.0 release changelogs

<!-- The following line should NOT be put in the official release changelogs -->
‚ö†Ô∏è Since this is a release candidate (RC), we do NOT recommend using it in a production environment. Is something not working as expected? We welcome [bug reports](https://github.com/meilisearch/meilisearch/issues/new/choose) and [feedback about new features](https://github.com/meilisearch/product/discussions).

We are proud to announce we are releasing the first major release of Meilisearch! üéâ This new release, contrary to v0.30.0, focus on stabilization instead of bringing new features. We took the opportunity to make the final touch regarding breaking changes in the CLI and the error handler.
To ensure the stability of Meilisearch, we will not introduce any breaking changes in future versions until the release of v2.0.0. Please refer to our [versioning policy](https://github.com/meilisearch/engine-team/blob/main/resources/versioning-policy.md) for a definition of what we consider to be a breaking change in Meilisearch.

<!-- The following lines should ONLY be put in the official release changelogs -->
üß∞ Most integrations (SDKs, clients, libraries) will be compatible with this version within four hours of the release. Sometimes this can take up to 48 hours, depending on the issues we encounter during the release.

<!-- The following lines should ONLY be put in the official release changelogs -->
Here is the exhaustive list of integrations  **not immediately compatible** with v1.0.0:
- TBD

<!-- The following line should NOT be put in the official release changelogs -->
üìñ Meilisearch's official documentation will be ready for the official v1.0.0 release. Meanwhile, work-in-progress documentation is available [here]().

# New features and improvements üî•

# Charabia

TBD

Done by @ManyTheFish, @dureuill, @choznerol, @crudiedo, @daniel-shuy, @harshalkhachane, @mosuka, @qbx2, @Roms1383, @Sokom141, and @yenwel in #3269 and meilisearch/milli#TBD and all the Charabia's PRs listed [here](https://github.com/meilisearch/charabia/releases/tag/v0.7.0).

# Generate master key option

You can now take advantage of the `--generate-master-key` CLI option.

By using that option, you can easily generate a strong master key to secure your Meilisearch instance easily. Using that option won't start Meilisearch and will exit without any error.

Done in #3274 by @dureuill

## Other improvements

* Search speed improvements:
  * Significantly improve the memory usage of search requests containing multiple long words (#3269 and meilisearch/milli#708) @loiclec
  * Significantly improve the performance of the `exactness` ranking rule for search requests containing many words (#3269 and meilisearch/milli#709) @loiclec
  * Translate multi-word synonyms into [phrases](https://docs.meilisearch.com/learn/what_is_meilisearch/features.html#phrase-search) when interpreting a search query. This change improves the relevancy of the results and stabilises the latency of search queries containing many multi-word synonyms, removing a source of denial-of-service attacks. (#3269 and meilisearch/milli#732) @loiclec
  * Improve the performance of the `proximity` ranking rule for search requests ending with short words (#3269 and meilisearch/milli#733) @loiclec
  * Limit the reindexing caused by updating settings when not needed (meilisearch/milli#706 and #3269) @GregoryConrad
* You can now migrate from any old versions of Meilisearch (supporting the dump feature) to the latest version using a single dump. We hope to facilitate your migration to v1.0.0 so you can enjoy the latest features as easily as possible (#3170) @dureuill
* Improve [`download-latest.sh`](https://github.com/meilisearch/meilisearch/blob/main/download-latest.sh) script: integrate apple-silicon binary (#3169) @curquiza
* Clarify error message when the DB and engine versions are incompatible (#3279) @dureuill

# Breaking changes ‚ö†Ô∏è

Since we are releasing v1.0.0, this is the last time we are introducing breaking changes to this release before v2.0.0.

## New CLI behavior

* As a security measure, Meilisearch will now reject master keys that are less than 16 bytes in [production environment](https://docs.meilisearch.com/learn/configuration/instance_options.html#environment) (#3274) @dureuill
* Remove `--max-index-size` and `--max-task-db` configuration options (#3278) @dureuill
Indeed, these options did not include the real space Meilisearch takes on the disk and were not adapted to the user's needs.
* Remove `--disable-auto-batching` CLI option (#3296) @loiclec
This option was initially introduced as a workaround in case of a bug and is no longer useful since the feature has matured.
* Rename dump command from `--dumps-dir` to `--dump-dir` (#3175) @dureuill
* Remove `--snapshot-interval-sec` and `--schedule-snapshot` now accepts an optional integer value specifying the interval in seconds (#3281) @dureuill
* The `--log-level` option and `MEILI_LOG_LEVEL` environment variable now only accept the following arguments: `ERROR`, `WARN`, `INFO`, `DEBUG`, `TRACE` and `OFF` (#3293) @loiclec

## Revamped primary key inference

We have improved the primary key inference process when receiving documents for the first time.

If an index's primary key has not been specified earlier, Meilisearch will attempt to infer the primary key by searching for any properties ending with `id`, such as `puid` or` _id`.

If only one such key is detected, it will be designated as the index primary key.

If multiple properties ending with `id` are detected, Meilisearch will notify you and ask you to specify the property representing the identifier of your documents instead of choosing the first found one.

If no primary key candidates are detected, Meilisearch will continue to throw an error as before.

Done in meilisearch/milli#752 and #3269 by @dureuill

## Error handler changes

* Add a new error `code`: `io_error` (used instead of `internal`) (#3263) @irevoire
* Add a new error `code`: `too_many_open_files` (used instead of `internal`) (#3263) @irevoire
* TBD (changes brought by Tamo)

# Fixes üêû

* Commit SHA and date are now present in the Meilisearch logs when launching Meilisearch from a Docker image (#3212) @brunoocasali
* Fix `MDB_PAGE_FULL` internal error that would sometimes occur when inserting documents on macOS (#3210) @Kerollmops
* Re-introduce the `no_space_left_on_device` error (#3263) @irevoire
* Index date creation and update are now kept when using a dump (#3245) @amab8901
* Fix documentation link when returning errors (#3288) @loiclec

# Misc

These changes do not impact the user experience.

* GitHub CIs
  * Replace deprecated set-output in GitHub actions (#3015) @funilrys
  * Use ubuntu-latest when not impacting (#3183) @curquiza
  * Add CI to push a `latest` git tag for every stable Meilisearch release (#3172 and #3207) @curquiza
  * Add `workflow_dispatch` to flaky.yml (#3041) @curquiza
  * Add a dispatch to the publish binaries workflow (#3100) @curquiza
  * Remove macos-latest and windows-latest usages (#3264) @curquiza
  * Add a nightly CI: create a `nightly` Docker tag every day based on the latest commit on `main` (#3229 and #3247) @curquiza
  * Use ubuntu-18.04 container instead of GitHub hosted actions (#3261) @curquiza
* Test suite
  * Re-enable dump tests (#3119) @irevoire
  * Re-enable the dump test on the dates (#3188) @irevoire
  * Stop snapshotting the version of Meilisearch in the dump test (#3208) @irevoire
* Dependencies
  * Fix update-cargo-toml-version.yml (#3224) @mohitsaxenaknoldus
  * Update CI dependencies (#3179, #3181 and #3180)
  * Update some `cargo_toml` dependency (#3128) @colbsmcdolbs
  * Update mini-dashboard to v0.2.4 (#3186) @mdubus
* Documentation
  * Update README to reference Meilisearch Cloud (#3221) @davelarkan
  * Replace Slack by Discord in README.md (#3234 and #3276) @tpayet @shivaylamba
* Internal changes
  * Implement Uuid codec for heed (#3001) @elbertronnie
  * Improve the way we receive the documents payload (#3164) @jiangbo212
  * Improve clarity of the code that receives payloads (#3236) @Kerollmops
  * Extract the dates out of the dumpv4. (#3012 and #3190) @funilrys @irevoire
  * Rename meilisearch-http (#3112) @colbsmcdolbs

‚ù§Ô∏è Thanks again to our external contributors:
- [Meilisearch](https://github.com/meilisearch/meilisearch): @amab8901, @colbsmcdolbs, @elbertronnie, @funilrys, @jiangbo212, @mohitsaxenaknoldus, and @shivaylamba.
- [Milli](https://github.com/meilisearch/milli): @amab8901, @GregoryConrad and @pnhatminh.
- [Charabia](https://github.com/meilisearch/charabia): @choznerol, @crudiedo, @daniel-shuy, @harshalkhachane, @mosuka, @qbx2, @Roms1383, @Sokom141, and @yenwel.
